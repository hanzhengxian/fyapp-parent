<?xml version="1.0" encoding="GB2312" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- ==========================================================  -->
<!-- Configuration for ibatis sqlmap mapping.                    -->
<!-- ==========================================================  -->

<!-- ============================================================================= -->
<!-- This file is generated by <tt>onway-gen-dal</tt>, a DAL (Data Access Layer)    -->
<!-- code generation utility specially developed for <tt>onway</tt> project.        -->
<!--                                                                               -->
<!-- PLEASE DO NOT MODIFY THIS FILE MANUALLY, or else your modification may be     -->
<!-- OVERWRITTEN by someone else. To modify the file, you should go to directory   -->
<!-- <tt>(project-home)/biz/dal/src/conf/dalgen</tt>, and find the corresponding   -->
<!-- configuration files. Modify those files according to your needs, then run     -->
<!-- <tt>onway-gen-dal</tt> to generate this file.                                  -->
<!--                                                                               -->
<!-- @author guangdong.li                                                             -->
<!-- ============================================================================= -->

<sqlMap namespace="onway">
    <!-- ============================================= -->
    <!-- RESULT MAPS                                   -->
    <!-- ============================================= -->

    <!-- result maps for database table hqyt_discount -->
    <resultMap id="RM-DISCOUNT" class="com.onway.fyapp.common.dal.dataobject.DiscountDO">
		<result property="id" column="ID"  javaType="int" jdbcType="INT"  nullValue="0"/>
		<result property="discountTeamId" column="DISCOUNT_TEAM_ID"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="discountId" column="DISCOUNT_ID"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="discountName" column="DISCOUNT_NAME"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="discountType" column="DISCOUNT_TYPE"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="discountBackground" column="DISCOUNT_BACKGROUND"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="amount.cent" column="AMOUNT"  javaType="long" jdbcType="DECIMAL" />
		<result property="limitAmount.cent" column="LIMIT_AMOUNT"  javaType="long" jdbcType="DECIMAL" />
		<result property="discount" column="DISCOUNT"  javaType="double" jdbcType="DOUBLE"  nullValue="0"/>
		<result property="timeType" column="TIME_TYPE"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="timeEnd" column="TIME_END"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="timeEndReceive" column="TIME_END_RECEIVE"  javaType="java.util.Date" jdbcType="DATETIME" />
		<result property="linkTeam" column="LINK_TEAM"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="linkTeamChild" column="LINK_TEAM_CHILD"  javaType="java.lang.String" jdbcType="TEXT" />
		<result property="linkPro" column="LINK_PRO"  javaType="java.lang.String" jdbcType="TEXT" />
		<result property="discountSubType" column="DISCOUNT_SUB_TYPE"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="canOverUse" column="CAN_OVER_USE"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="canOverNums" column="CAN_OVER_NUMS"  javaType="int" jdbcType="INT"  nullValue="0"/>
		<result property="canTogeUse" column="CAN_TOGE_USE"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="canTogeDisid" column="CAN_TOGE_DISID"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="limitUserLevel" column="LIMIT_USER_LEVEL"  javaType="int" jdbcType="INT"  nullValue="0"/>
		<result property="delFlg" column="DEL_FLG"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="rank" column="RANK"  javaType="int" jdbcType="INT"  nullValue="0"/>
		<result property="publishFlg" column="PUBLISH_FLG"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="canDiscountUse" column="CAN_DISCOUNT_USE"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="gmtCreate" column="GMT_CREATE"  javaType="java.util.Date" jdbcType="DATETIME" />
		<result property="gmtModified" column="GMT_MODIFIED"  javaType="java.util.Date" jdbcType="DATETIME" />
		<result property="creater" column="CREATER"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="modifier" column="MODIFIER"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="linkProvince" column="LINK_PROVINCE"  javaType="java.lang.String" jdbcType="VARCHAR" />
    </resultMap>


    <!-- ============================================= -->
    <!-- mapped statements for IbatisDiscountDAO -->
    <!-- ============================================= -->
    <!-- mapped statement for IbatisDiscountDAO.queryList -->
			 <select id="MS-DISCOUNT-QUERY-LIST" resultClass="java.util.HashMap">
	        SELECT result.* FROM
        	(
				SELECT
			        hd.ID id,
					hd.DISCOUNT_TEAM_ID discountTeamId,
					hd.DISCOUNT_ID discountId,
					hd.DISCOUNT_NAME discountName,
					hd.DISCOUNT_TYPE discountType,
					hd.DISCOUNT_BACKGROUND	discountBackground,
					hd.AMOUNT	amount,
					hd.LIMIT_AMOUNT limitAmount,
					hd.DISCOUNT	discount,
					hd.TIME_TYPE timeType,
					hd.TIME_END timeEnd,
					hd.TIME_END_RECEIVE	timeEndReceive,
					hd.LINK_TEAM	linkTeam,
					hd.LINK_PRO		linkPro,
					hd.DISCOUNT_SUB_TYPE	discountSubType,
					hd.CAN_OVER_USE	canOverUse,
					hd.CAN_OVER_NUMS	canOverNums,
					hd.CAN_TOGE_USE	canTogeUse,
					hd.CAN_TOGE_DISID	canTogeDisid,
					hd.LIMIT_USER_LEVEL	limitUserLevel,
					hd.DEL_FLG	delFlg,
					hd.RANK	rank,
					hd.LINK_TEAM_CHILD linkTeamChild,
					hd.PUBLISH_FLG publishFlg,
					hd.CAN_DISCOUNT_USE canDiscountUse,
					hd.GMT_CREATE	gmtCreate,
					hd.GMT_MODIFIED	gmtModified,
					hd.LINK_PROVINCE linkProvince,
					scu.USERNAME creater,
					smu.USERNAME modifier
					<isNotEmpty property="productIdArray" prepend=",">
						is_mixed (
							replace_json(hd.LINK_PRO),
							replace_json(#productIdArray#)
						) AS hasMix
					</isNotEmpty>
					<isEmpty property="productIdArray" prepend=",">
						'0' AS hasMix
					</isEmpty>
					<isNotEmpty property="teamChildIdArray" prepend=",">
						is_mixed (
							replace_json(hd.LINK_TEAM_CHILD),
							replace_json(#teamChildIdArray#)
						) AS hasTcMix
					</isNotEmpty>
					<isEmpty property="teamChildIdArray" prepend=",">
						'0' AS hasTcMix
					</isEmpty>
					<isNotEmpty property="linkCityArray" prepend=",">
						is_mixed (
							replace_json(hd.LINK_PROVINCE),
							replace_json(#linkCityArray#)
						) AS hasCityMix
					</isNotEmpty>
					<isEmpty property="linkCityArray" prepend=",">
						'0' AS hasCityMix
					</isEmpty>
				FROM 
					hqyt_discount hd
				LEFT JOIN sys_role_user scu ON scu.USER_ID = hd.CREATER
				LEFT JOIN sys_role_user smu ON smu.USER_ID = hd.MODIFIER	
				LEFT JOIN hqyt_team ht ON ht.TEAM_ID = hd.LINK_TEAM	
	            WHERE 
	            	hd.DEL_FLG NOT IN ('1') 
		        <isNotEmpty property="discountId" prepend="and">
	                hd.DISCOUNT_ID like '%$discountId$%'
	            </isNotEmpty>
	            <isNotEmpty property="discountName" prepend="and">
	                hd.DISCOUNT_NAME like '%$discountName$%'
	            </isNotEmpty>
	            <isNotEmpty property="discountType" prepend="and">
	                hd.DISCOUNT_TYPE = #discountType#
	            </isNotEmpty>
	            <isNotEmpty property="teamId" prepend="and">
	                hd.LINK_TEAM like '%$teamId$%'
	            </isNotEmpty>
	            <isNotEmpty property="teamName" prepend="and">
	                ht.TEAM_NAME like '%$teamName$%'
	            </isNotEmpty>
	            <isNotEmpty property="productErpNo" prepend="and" >
	                ht.ERP_NO like '%$productErpNo$%'
	            </isNotEmpty>
	            <isNotEmpty property="productId" prepend="and">
	                hd.LINK_PRO like '%$productId$%'
	            </isNotEmpty>
	            <isNotEmpty property="canOverUse" prepend="and">
	                hd.CAN_OVER_USE = #canOverUse#
	            </isNotEmpty>
	            <isNotEmpty property="limitUserLevel" prepend="and">
	                hd.LIMIT_USER_LEVEL = #limitUserLevel#
	            </isNotEmpty>
	            <isNotEmpty property="startDate" prepend="and">
			          <![CDATA[
			             	hd.GMT_CREATE >=  #startDate#
			          ]]>        
			    </isNotEmpty>
			    <isNotEmpty property="endDate" prepend="and">
			          <![CDATA[
			                hd.GMT_CREATE <= #endDate#
			          ]]>      
			    </isNotEmpty>
			    
			    <isEqual prepend="and" property="speType" compareValue = "1">
					 <![CDATA[
			                hd.TIME_END_RECEIVE >= #thisDate#
			          ]]>  
				</isEqual>
				
				<isEqual prepend="and" property="speType" compareValue = "2">
					<![CDATA[
			                hd.TIME_END_RECEIVE < #thisDate#
			          ]]> 
				</isEqual>
				
				<isNotEmpty property="thisDiscounId" prepend="and">
	                hd.DISCOUNT_ID &lt;&gt; #thisDiscounId#
	            </isNotEmpty>
	            
	            <isNotEmpty property="publishFlg" prepend="and">
	                hd.PUBLISH_FLG = #publishFlg#
	            </isNotEmpty>
	            
	            <isNotEmpty property="teamChildId" prepend="and">
	                hd.LINK_TEAM_CHILD like '%$teamChildId$%'
	            </isNotEmpty>
	            
	            <isNotEmpty property="linkProvince" prepend="and">
	                hd.LINK_PROVINCE like '%$linkProvince$%'
	            </isNotEmpty>
		    ) result
		    WHERE 1=1
		    <isNotEmpty property="productIdArray" prepend="and">
	              result.hasMix = 1
	        </isNotEmpty>
	        <isNotEmpty property="teamChildIdArray" prepend="and">
	              result.hasTcMix = 1
	        </isNotEmpty>
	        <isNotEmpty property="linkCityArray" prepend="and">
	              result.hasCityMix = 1
	        </isNotEmpty>
            ORDER BY result.gmtCreate DESC
	        <isNotEmpty property="offset">
                limit $offset$,$limit$
            </isNotEmpty>
    </select>

    <!-- mapped statement for IbatisDiscountDAO.queryListCount -->
			 <select id="MS-DISCOUNT-QUERY-LIST-COUNT" resultClass="int">
	        SELECT COUNT(1) FROM
        	(
				SELECT
			        hd.ID id,
					hd.DISCOUNT_TEAM_ID discountTeamId,
					hd.DISCOUNT_ID discountId,
					hd.DISCOUNT_NAME discountName,
					hd.DISCOUNT_TYPE discountType,
					hd.DISCOUNT_BACKGROUND	discountBackground,
					hd.AMOUNT	amount,
					hd.LIMIT_AMOUNT limitAmount,
					hd.DISCOUNT	discount,
					hd.TIME_TYPE timeType,
					hd.TIME_END timeEnd,
					hd.TIME_END_RECEIVE	timeEndReceive,
					hd.LINK_TEAM	linkTeam,
					hd.LINK_PRO		linkPro,
					hd.DISCOUNT_SUB_TYPE	discountSubType,
					hd.CAN_OVER_USE	canOverUse,
					hd.CAN_OVER_NUMS	canOverNums,
					hd.CAN_TOGE_USE	canTogeUse,
					hd.CAN_TOGE_DISID	canTogeDisid,
					hd.LIMIT_USER_LEVEL	limitUserLevel,
					hd.DEL_FLG	delFlg,
					hd.RANK	rank,
					hd.LINK_TEAM_CHILD linkTeamChild,
					hd.PUBLISH_FLG publishFlg,
					hd.CAN_DISCOUNT_USE canDiscountUse,
					hd.GMT_CREATE	gmtCreate,
					hd.GMT_MODIFIED	gmtModified,
					hd.LINK_PROVINCE linkProvince,
					scu.USERNAME creater,
					smu.USERNAME modifier
					<isNotEmpty property="productIdArray" prepend=",">
						is_mixed (
							replace_json(hd.LINK_PRO),
							replace_json(#productIdArray#)
						) AS hasMix
					</isNotEmpty>
					<isEmpty property="productIdArray" prepend=",">
						'0' AS hasMix
					</isEmpty>
					<isNotEmpty property="teamChildIdArray" prepend=",">
						is_mixed (
							replace_json(hd.LINK_TEAM_CHILD),
							replace_json(#teamChildIdArray#)
						) AS hasTcMix
					</isNotEmpty>
					<isEmpty property="teamChildIdArray" prepend=",">
						'0' AS hasTcMix
					</isEmpty>
					<isNotEmpty property="linkCityArray" prepend=",">
						is_mixed (
							replace_json(hd.LINK_PROVINCE),
							replace_json(#linkCityArray#)
						) AS hasCityMix
					</isNotEmpty>
					<isEmpty property="linkCityArray" prepend=",">
						'0' AS hasCityMix
					</isEmpty>
				FROM 
					hqyt_discount hd
				LEFT JOIN sys_role_user scu ON scu.USER_ID = hd.CREATER
				LEFT JOIN sys_role_user smu ON smu.USER_ID = hd.MODIFIER	
				LEFT JOIN hqyt_team ht ON ht.TEAM_ID = hd.LINK_TEAM	
	            WHERE 
	            	hd.DEL_FLG NOT IN ('1') 
		        <isNotEmpty property="discountId" prepend="and">
	                hd.DISCOUNT_ID like '%$discountId$%'
	            </isNotEmpty>
	            <isNotEmpty property="discountName" prepend="and">
	                hd.DISCOUNT_NAME like '%$discountName$%'
	            </isNotEmpty>
	            <isNotEmpty property="discountType" prepend="and">
	                hd.DISCOUNT_TYPE = #discountType#
	            </isNotEmpty>
	            <isNotEmpty property="teamId" prepend="and">
	                hd.LINK_TEAM like '%$teamId$%'
	            </isNotEmpty>
	            <isNotEmpty property="teamName" prepend="and">
	                ht.TEAM_NAME like '%$teamName$%'
	            </isNotEmpty>
	            <isNotEmpty property="productErpNo" prepend="and" >
	                ht.ERP_NO like '%$productErpNo$%'
	            </isNotEmpty>
	            <isNotEmpty property="productId" prepend="and">
	                hd.LINK_PRO like '%$productId$%'
	            </isNotEmpty>
	            <isNotEmpty property="canOverUse" prepend="and">
	                hd.CAN_OVER_USE = #canOverUse#
	            </isNotEmpty>
	            <isNotEmpty property="limitUserLevel" prepend="and">
	                hd.LIMIT_USER_LEVEL = #limitUserLevel#
	            </isNotEmpty>
	            <isNotEmpty property="startDate" prepend="and">
			          <![CDATA[
			             	hd.GMT_CREATE >=  #startDate#
			          ]]>        
			    </isNotEmpty>
			    <isNotEmpty property="endDate" prepend="and">
			          <![CDATA[
			                hd.GMT_CREATE <= #endDate#
			          ]]>      
			    </isNotEmpty>
			    
			    <isEqual prepend="and" property="speType" compareValue = "1">
					 <![CDATA[
			                hd.TIME_END_RECEIVE >= #thisDate#
			          ]]>  
				</isEqual>
				
				<isEqual prepend="and" property="speType" compareValue = "2">
					<![CDATA[
			                hd.TIME_END_RECEIVE < #thisDate#
			          ]]> 
				</isEqual>
				
				<isNotEmpty property="thisDiscounId" prepend="and">
	                hd.DISCOUNT_ID &lt;&gt; #thisDiscounId#
	            </isNotEmpty>
	            
	            <isNotEmpty property="publishFlg" prepend="and">
	                hd.PUBLISH_FLG = #publishFlg#
	            </isNotEmpty>
	            
	            <isNotEmpty property="teamChildId" prepend="and">
	                hd.LINK_TEAM_CHILD like '%$teamChildId$%'
	            </isNotEmpty>
	            
	            <isNotEmpty property="linkProvince" prepend="and">
	                hd.LINK_PROVINCE like '%$linkProvince$%'
	            </isNotEmpty>
				
		    ) result
		    WHERE 1=1
		    <isNotEmpty property="productIdArray" prepend="and">
	              result.hasMix = 1
	        </isNotEmpty>
	        <isNotEmpty property="teamChildIdArray" prepend="and">
	              result.hasTcMix = 1
	        </isNotEmpty>
	        <isNotEmpty property="linkCityArray" prepend="and">
	              result.hasCityMix = 1
	        </isNotEmpty>
    </select>

    <!-- mapped statement for IbatisDiscountDAO.queryGroupList -->
			 <select id="MS-DISCOUNT-QUERY-GROUP-LIST" resultMap="RM-DISCOUNT">
	        SELECT
		        *
			FROM 
				hqyt_discount
            WHERE 
            	DEL_FLG NOT IN ('1') 
	        <isNotEmpty property="discountTeamId">
                and DISCOUNT_TEAM_ID = #discountTeamId#
            </isNotEmpty>
            <isNotEmpty property="discountName">
                and DISCOUNT_NAME like '%$discountName$%'
            </isNotEmpty>
            <isNotEmpty property="discountType">
                and DISCOUNT_TYPE = #discountType#
            </isNotEmpty>
            <isNotEmpty property="discountId">
                and DISCOUNT_ID = #discountId#
            </isNotEmpty>
            ORDER BY GMT_CREATE DESC
	        <isNotEmpty property="offset">
                limit $offset$,$limit$
            </isNotEmpty>
    </select>

    <!-- mapped statement for IbatisDiscountDAO.queryGroupListCount -->
			 <select id="MS-DISCOUNT-QUERY-GROUP-LIST-COUNT" resultClass="int">
	        SELECT
		        COUNT(1)
			FROM 
				hqyt_discount
            WHERE 
            	DEL_FLG NOT IN ('1')
	        <isNotEmpty property="discountTeamId">
                and DISCOUNT_TEAM_ID = #discountTeamId#
            </isNotEmpty>
            <isNotEmpty property="discountName">
                and DISCOUNT_NAME like '%$discountName$%'
            </isNotEmpty>
            <isNotEmpty property="discountType">
                and DISCOUNT_TYPE = #discountType#
            </isNotEmpty>
            <isNotEmpty property="discountId">
                and DISCOUNT_ID = #discountId#
            </isNotEmpty>
    </select>

    <!-- mapped statement for IbatisDiscountDAO.queryListForAlert -->
			 <select id="MS-DISCOUNT-QUERY-LIST-FOR-ALERT" resultMap="RM-DISCOUNT">
	        SELECT
		        *
			FROM 
				hqyt_discount
            WHERE 
            	DEL_FLG NOT IN ('1') 
	        <isNotEmpty property="discountId">
                and DISCOUNT_ID = #discountId#
            </isNotEmpty>
            <isNotEmpty property="discountName">
                and DISCOUNT_NAME like '%$discountName$%'
            </isNotEmpty>
            <isNotEmpty property="discountType">
                and DISCOUNT_TYPE = #discountType#
            </isNotEmpty>
            <isEqual prepend="and" property="speType" compareValue = "1">
					 <![CDATA[
			                TIME_END_RECEIVE >= #thisDate#
			         ]]>  
			</isEqual>
				
			<isEqual prepend="and" property="speType" compareValue = "2">
					<![CDATA[
			                TIME_END_RECEIVE < #thisDate#
			        ]]> 
			</isEqual>
            ORDER BY GMT_CREATE DESC
	        <isNotEmpty property="offset">
                limit $offset$,$limit$
            </isNotEmpty>
    </select>

    <!-- mapped statement for IbatisDiscountDAO.queryListForAlertCount -->
			 <select id="MS-DISCOUNT-QUERY-LIST-FOR-ALERT-COUNT" resultClass="int">
	        SELECT
		        COUNT(1)
			FROM 
				hqyt_discount
            WHERE 
            	DEL_FLG NOT IN ('1') 
	        <isNotEmpty property="discountId">
                and DISCOUNT_ID = #discountId#
            </isNotEmpty>
            <isNotEmpty property="discountName">
                and DISCOUNT_NAME like '%$discountName$%'
            </isNotEmpty>
            <isNotEmpty property="discountType">
                and DISCOUNT_TYPE = #discountType#
            </isNotEmpty>
            <isEqual prepend="and" property="speType" compareValue = "1">
					 <![CDATA[
			                TIME_END_RECEIVE >= #thisDate#
			         ]]>  
			</isEqual>
				
			<isEqual prepend="and" property="speType" compareValue = "2">
					<![CDATA[
			                TIME_END_RECEIVE < #thisDate#
			        ]]> 
			</isEqual>
    </select>

    <!-- mapped statement for IbatisDiscountDAO.insert -->
    <insert id="MS-DISCOUNT-INSERT">
    <![CDATA[
        insert into hqyt_discount(DISCOUNT_TEAM_ID,DISCOUNT_ID,DISCOUNT_NAME,DISCOUNT_TYPE,DISCOUNT_BACKGROUND,AMOUNT,LIMIT_AMOUNT,DISCOUNT,TIME_TYPE,TIME_END,TIME_END_RECEIVE,LINK_TEAM,LINK_PRO,DISCOUNT_SUB_TYPE,CAN_OVER_USE,CAN_OVER_NUMS,CAN_TOGE_USE,CAN_TOGE_DISID,LIMIT_USER_LEVEL,DEL_FLG,RANK,CAN_DISCOUNT_USE,CREATER,GMT_CREATE,GMT_MODIFIED) values (#discountTeamId#, #discountId#, #discountName#, #discountType#, #discountBackground#, #amount.cent#, #limitAmount.cent#, #discount#, #timeType#, #timeEnd#, #timeEndReceive#, #linkTeam#, #linkPro#, #discountSubType#, #canOverUse#, #canOverNums#, #canTogeUse#, #canTogeDisid#, #limitUserLevel#, #delFlg#, #rank#, #canDiscountUse#, #creater#, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
    ]]>
	<selectKey resultClass="int" keyProperty="id">
       select last_insert_id() as id
    </selectKey>
    </insert>

    <!-- mapped statement for IbatisDiscountDAO.update -->
    <update id="MS-DISCOUNT-UPDATE">
    <![CDATA[
        update hqyt_discount set DISCOUNT_TEAM_ID=#discountTeamId#, DISCOUNT_NAME=#discountName#, DISCOUNT_TYPE=#discountType#, DISCOUNT_BACKGROUND=#discountBackground#, AMOUNT=#amount.cent#, LIMIT_AMOUNT=#limitAmount.cent#, DISCOUNT=#discount#, TIME_TYPE=#timeType#, TIME_END=#timeEnd#, TIME_END_RECEIVE=#timeEndReceive#, LINK_TEAM=#linkTeam#, LINK_PRO=#linkPro#, DISCOUNT_SUB_TYPE=#discountSubType#, CAN_OVER_USE=#canOverUse#, CAN_OVER_NUMS=#canOverNums#, CAN_TOGE_USE=#canTogeUse#, CAN_TOGE_DISID=#canTogeDisid#, LIMIT_USER_LEVEL=#limitUserLevel#, RANK=#rank#, DEL_FLG=#delFlg#, MODIFIER=#modifier#, CAN_DISCOUNT_USE=#canDiscountUse#, GMT_MODIFIED=CURRENT_TIMESTAMP where (DISCOUNT_ID = #discountId#)
    ]]>
    </update>

    <!-- mapped statement for IbatisDiscountDAO.delete -->
    <update id="MS-DISCOUNT-DELETE">
    <![CDATA[
        update hqyt_discount set DEL_FLG='1', MODIFIER=#modifier#, GMT_MODIFIED=CURRENT_TIMESTAMP where (DISCOUNT_ID = #discountId#)
    ]]>
    </update>

    <!-- mapped statement for IbatisDiscountDAO.queryCountDiscount -->
			 <select id="MS-DISCOUNT-QUERY-COUNT-DISCOUNT" resultClass="int">
	    <![CDATA[
        select count(1) from hqyt_discount where ((DISCOUNT_TEAM_ID = #value#) AND (DEL_FLG NOT IN ('1')) AND (PUBLISH_FLG = '1'))
    ]]>
    </select>

    <!-- mapped statement for IbatisDiscountDAO.removeDiscount -->
    <update id="MS-DISCOUNT-REMOVE-DISCOUNT">
    <![CDATA[
        update hqyt_discount set DISCOUNT_TEAM_ID=NULL, MODIFIER=#modifier#, GMT_MODIFIED=CURRENT_TIMESTAMP where (DISCOUNT_ID = #discountId#)
    ]]>
    </update>

    <!-- mapped statement for IbatisDiscountDAO.updateCanTogetherDiscounId -->
    <update id="MS-DISCOUNT-UPDATE-CAN-TOGETHER-DISCOUN-ID">
    <![CDATA[
        update hqyt_discount set CAN_TOGE_USE=#canTogeUse#, CAN_TOGE_DISID=#canTogeDisid#, MODIFIER=#modifier#, GMT_MODIFIED=CURRENT_TIMESTAMP where (DISCOUNT_ID = #discountId#)
    ]]>
    </update>

    <!-- mapped statement for IbatisDiscountDAO.queryByDiscountId -->
			 <select id="MS-DISCOUNT-QUERY-BY-DISCOUNT-ID" resultMap="RM-DISCOUNT">
	        SELECT
		        *
			FROM 
				hqyt_discount
            WHERE 
            	DEL_FLG NOT IN ('1') 
	        <isNotEmpty property="discountId">
                and DISCOUNT_ID = #discountId#
            </isNotEmpty>
    </select>

    <!-- mapped statement for IbatisDiscountDAO.queryByCantogeId -->
			 <select id="MS-DISCOUNT-QUERY-BY-CANTOGE-ID" resultMap="RM-DISCOUNT">
	        SELECT
		        *
			FROM 
				hqyt_discount
            WHERE 
            	DEL_FLG NOT IN ('1') 
	        <isNotEmpty property="discountId">
                and CAN_TOGE_DISID like '%$discountId$%'
            </isNotEmpty>
    </select>

    <!-- mapped statement for IbatisDiscountDAO.modifyLinkPro -->
    <update id="MS-DISCOUNT-MODIFY-LINK-PRO">
    <![CDATA[
        update hqyt_discount set LINK_PRO=#linkPro#, MODIFIER=#modifier#, GMT_MODIFIED=CURRENT_TIMESTAMP where (DISCOUNT_ID = #discountId#)
    ]]>
    </update>

    <!-- mapped statement for IbatisDiscountDAO.modifyLinkTeam -->
    <update id="MS-DISCOUNT-MODIFY-LINK-TEAM">
    <![CDATA[
        update hqyt_discount set LINK_TEAM=#linkTeam#, LINK_TEAM_CHILD=#linkTeamChild#, MODIFIER=#modifier#, GMT_MODIFIED=CURRENT_TIMESTAMP where (DISCOUNT_ID = #discountId#)
    ]]>
    </update>

    <!-- mapped statement for IbatisDiscountDAO.modifyLinkDis -->
    <update id="MS-DISCOUNT-MODIFY-LINK-DIS">
    <![CDATA[
        update hqyt_discount set CAN_TOGE_DISID=#canTogeDisid#, MODIFIER=#modifier#, GMT_MODIFIED=CURRENT_TIMESTAMP where (DISCOUNT_ID = #discountId#)
    ]]>
    </update>

    <!-- mapped statement for IbatisDiscountDAO.modifyLinkTeamChild -->
    <update id="MS-DISCOUNT-MODIFY-LINK-TEAM-CHILD">
    <![CDATA[
        update hqyt_discount set LINK_TEAM_CHILD=#linkTeamChild#, MODIFIER=#modifier#, GMT_MODIFIED=CURRENT_TIMESTAMP where (DISCOUNT_ID = #discountId#)
    ]]>
    </update>

    <!-- mapped statement for IbatisDiscountDAO.modifyPublishFlg -->
    <update id="MS-DISCOUNT-MODIFY-PUBLISH-FLG">
    <![CDATA[
        update hqyt_discount set PUBLISH_FLG=#publishFlg#, MODIFIER=#modifier#, GMT_MODIFIED=CURRENT_TIMESTAMP where (DISCOUNT_ID = #discountId#)
    ]]>
    </update>

    <!-- mapped statement for IbatisDiscountDAO.modifyLinkProvince -->
    <update id="MS-DISCOUNT-MODIFY-LINK-PROVINCE">
    <![CDATA[
        update hqyt_discount set LINK_PROVINCE=#linkProvince#, MODIFIER=#modifier#, GMT_MODIFIED=CURRENT_TIMESTAMP where (DISCOUNT_ID = #discountId#)
    ]]>
    </update>

    <!-- mapped statement for IbatisDiscountDAO.getDisCountName -->
			 <select id="MS-DISCOUNT-GET-DIS-COUNT-NAME" resultClass="java.lang.String">
	        SELECT
		        DISCOUNT_NAME
			FROM 
				hqyt_discount
            WHERE 1=1
	        <isNotEmpty property="discountId" prepend="and">
                 DISCOUNT_ID = #discountId#
            </isNotEmpty>
    </select>

</sqlMap>