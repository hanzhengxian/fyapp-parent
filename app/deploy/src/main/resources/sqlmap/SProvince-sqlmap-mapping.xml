<?xml version="1.0" encoding="GB2312" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- ==========================================================  -->
<!-- Configuration for ibatis sqlmap mapping.                    -->
<!-- ==========================================================  -->

<!-- ============================================================================= -->
<!-- This file is generated by <tt>onway-gen-dal</tt>, a DAL (Data Access Layer)    -->
<!-- code generation utility specially developed for <tt>onway</tt> project.        -->
<!--                                                                               -->
<!-- PLEASE DO NOT MODIFY THIS FILE MANUALLY, or else your modification may be     -->
<!-- OVERWRITTEN by someone else. To modify the file, you should go to directory   -->
<!-- <tt>(project-home)/biz/dal/src/conf/dalgen</tt>, and find the corresponding   -->
<!-- configuration files. Modify those files according to your needs, then run     -->
<!-- <tt>onway-gen-dal</tt> to generate this file.                                  -->
<!--                                                                               -->
<!-- @author guangdong.li                                                             -->
<!-- ============================================================================= -->

<sqlMap namespace="onway">
    <!-- ============================================= -->
    <!-- RESULT MAPS                                   -->
    <!-- ============================================= -->

    <!-- result maps for database table s_provinces -->
    <resultMap id="RM-S-PROVINCE" class="com.onway.fyapp.common.dal.dataobject.SProvinceDO">
		<result property="id" column="id"  javaType="int" jdbcType="INT"  nullValue="0"/>
		<result property="cityName" column="cityName"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="parentId" column="parentId"  javaType="int" jdbcType="INT"  nullValue="0"/>
		<result property="shortName" column="shortName"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="depth" column="depth"  javaType="int" jdbcType="INT"  nullValue="0"/>
		<result property="cityCode" column="cityCode"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="zipCode" column="zipCode"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="mergerName" column="mergerName"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="longitude" column="longitude"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="latitude" column="latitude"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="pinyin" column="pinyin"  javaType="java.lang.String" jdbcType="VARCHAR" />
		<result property="isUse" column="isUse"  javaType="int" jdbcType="INT UNSIGNED"  nullValue="0"/>
		<result property="postage.cent" column="postage"  javaType="long" jdbcType="DECIMAL" />
		<result property="freePostage.cent" column="free_postage"  javaType="long" jdbcType="DECIMAL" />
    </resultMap>


    <!-- ============================================= -->
    <!-- mapped statements for IbatisSProvinceDAO -->
    <!-- ============================================= -->
    <!-- mapped statement for IbatisSProvinceDAO.queryAll -->
			 <select id="MS-S-PROVINCE-QUERY-ALL" resultMap="RM-S-PROVINCE">
	        SELECT * FROM s_provinces
				where 1=1 
				<isNotEmpty property="cityName" prepend="and">
	    			cityName like '%$cityName$%'
	    		</isNotEmpty>
	    		<isNotEmpty property="isUse" prepend="and">
	    			isUse = #isUse#
	    		</isNotEmpty>
	    		<isNotEmpty property="depth" prepend="and">
	    			depth = #depth#
	    		</isNotEmpty>
	    		ORDER BY pinyin
	    		LIMIT $offset$, $limit$
    </select>

    <!-- mapped statement for IbatisSProvinceDAO.queryAllCount -->
			 <select id="MS-S-PROVINCE-QUERY-ALL-COUNT" resultClass="int">
	        SELECT COUNT(1) FROM s_provinces
				where 1=1 
				<isNotEmpty property="cityName" prepend="and">
	    			cityName like '%$cityName$%'
	    		</isNotEmpty>
	    		<isNotEmpty property="isUse" prepend="and">
	    			isUse = #isUse#
	    		</isNotEmpty>
	    		<isNotEmpty property="depth" prepend="and">
	    			depth = #depth#
	    		</isNotEmpty>
    </select>

    <!-- mapped statement for IbatisSProvinceDAO.updateCanUse -->
    <update id="MS-S-PROVINCE-UPDATE-CAN-USE">
    <![CDATA[
        update s_provinces set isUse=#isUse# where (id = #id#)
    ]]>
    </update>

    <!-- mapped statement for IbatisSProvinceDAO.updatePostage -->
    <update id="MS-S-PROVINCE-UPDATE-POSTAGE">
    <![CDATA[
        update s_provinces set postage=#postage.cent#, free_postage=#freePostage.cent# where (id = #id#)
    ]]>
    </update>

    <!-- mapped statement for IbatisSProvinceDAO.queryAllProDiscount -->
			 <select id="MS-S-PROVINCE-QUERY-ALL-PRO-DISCOUNT" resultClass="java.util.HashMap">
	        SELECT 
					* 
				FROM s_provinces
				where 1=1 
				<isNotEmpty property="cityName" prepend="and">
	    			cityName like '%$cityName$%'
	    		</isNotEmpty>
	    		<isNotEmpty property="isUse" prepend="and">
	    			isUse = #isUse#
	    		</isNotEmpty>
	    		<isNotEmpty property="depth" prepend="and">
	    			depth = #depth#
	    		</isNotEmpty>
	    		
	    		<isEqual prepend="" property="hasChooseForDiscount" compareValue = "0">
		        	<isNotEmpty prepend="and" property="linkProvinces"> 
					 	cityName IN
						<iterate property="linkProvinces" open="(" close=")" conjunction="," > 
			        		#linkProvinces[]# 
			        	</iterate>
		    		</isNotEmpty>
		        </isEqual>
		        <isEqual prepend="" property="hasChooseForDiscount" compareValue = "1">
		        	<isNotEmpty prepend="and" property="linkProvinces"> 
					 	cityName NOT IN
						<iterate property="linkProvinces" open="(" close=")" conjunction="," > 
			        		#linkProvinces[]# 
			        	</iterate>
		    		</isNotEmpty>
		        </isEqual>
		        
	    		ORDER BY pinyin
	    		LIMIT $offset$, $limit$
    </select>

    <!-- mapped statement for IbatisSProvinceDAO.queryAllProDiscountCount -->
			 <select id="MS-S-PROVINCE-QUERY-ALL-PRO-DISCOUNT-COUNT" resultClass="int">
	        SELECT COUNT(1) FROM s_provinces
				where 1=1 
				<isNotEmpty property="cityName" prepend="and">
	    			cityName like '%$cityName$%'
	    		</isNotEmpty>
	    		<isNotEmpty property="isUse" prepend="and">
	    			isUse = #isUse#
	    		</isNotEmpty>
	    		<isNotEmpty property="depth" prepend="and">
	    			depth = #depth#
	    		</isNotEmpty>
	    		<isEqual prepend="" property="hasChooseForDiscount" compareValue = "0">
		        	<isNotEmpty prepend="and" property="linkProvinces"> 
					 	cityName IN
						<iterate property="linkProvinces" open="(" close=")" conjunction="," > 
			        		#linkProvinces[]# 
			        	</iterate>
		    		</isNotEmpty>
		        </isEqual>
		        <isEqual prepend="" property="hasChooseForDiscount" compareValue = "1">
		        	<isNotEmpty prepend="and" property="linkProvinces"> 
					 	cityName NOT IN
						<iterate property="linkProvinces" open="(" close=")" conjunction="," > 
			        		#linkProvinces[]# 
			        	</iterate>
		    		</isNotEmpty>
		        </isEqual>
    </select>

    <!-- mapped statement for IbatisSProvinceDAO.queryAllCityDiscount -->
			 <select id="MS-S-PROVINCE-QUERY-ALL-CITY-DISCOUNT" resultClass="java.util.HashMap">
	        SELECT 
					* 
				FROM s_provinces
				where 1=1 
				<isNotEmpty property="parentId" prepend="and">
	    			parentId = #parentId#
	    		</isNotEmpty>
	    		<isNotEmpty property="isUse" prepend="and">
	    			isUse = #isUse#
	    		</isNotEmpty>
	    		<isNotEmpty property="depth" prepend="and">
	    			depth = #depth#
	    		</isNotEmpty>
	    		
	    		<isEqual prepend="" property="hasChooseForDiscount" compareValue = "0">
		        	<isNotEmpty prepend="and" property="linkProvinces"> 
					 	cityName IN
						<iterate property="linkProvinces" open="(" close=")" conjunction="," > 
			        		#linkProvinces[]# 
			        	</iterate>
		    		</isNotEmpty>
		        </isEqual>
		        <isEqual prepend="" property="hasChooseForDiscount" compareValue = "1">
		        	<isNotEmpty prepend="and" property="linkProvinces"> 
					 	cityName NOT IN
						<iterate property="linkProvinces" open="(" close=")" conjunction="," > 
			        		#linkProvinces[]# 
			        	</iterate>
		    		</isNotEmpty>
		        </isEqual>
		        
	    		ORDER BY pinyin
	    		LIMIT $offset$, $limit$
    </select>

    <!-- mapped statement for IbatisSProvinceDAO.queryAllCityDiscountCount -->
			 <select id="MS-S-PROVINCE-QUERY-ALL-CITY-DISCOUNT-COUNT" resultClass="int">
	        SELECT COUNT(1) FROM s_provinces
				where 1=1 
				<isNotEmpty property="parentId" prepend="and">
	    			parentId = #parentId#
	    		</isNotEmpty>
	    		<isNotEmpty property="isUse" prepend="and">
	    			isUse = #isUse#
	    		</isNotEmpty>
	    		<isNotEmpty property="depth" prepend="and">
	    			depth = #depth#
	    		</isNotEmpty>
	    		<isEqual prepend="" property="hasChooseForDiscount" compareValue = "0">
		        	<isNotEmpty prepend="and" property="linkProvinces"> 
					 	cityName IN
						<iterate property="linkProvinces" open="(" close=")" conjunction="," > 
			        		#linkProvinces[]# 
			        	</iterate>
		    		</isNotEmpty>
		        </isEqual>
		        <isEqual prepend="" property="hasChooseForDiscount" compareValue = "1">
		        	<isNotEmpty prepend="and" property="linkProvinces"> 
					 	cityName NOT IN
						<iterate property="linkProvinces" open="(" close=")" conjunction="," > 
			        		#linkProvinces[]# 
			        	</iterate>
		    		</isNotEmpty>
		        </isEqual>
    </select>

    <!-- mapped statement for IbatisSProvinceDAO.queryAllProDisByCitys -->
			 <select id="MS-S-PROVINCE-QUERY-ALL-PRO-DIS-BY-CITYS" resultClass="java.lang.String">
	        SELECT
					cityName
				FROM s_provinces 
				WHERE
					id IN 
				(
				SELECT 
					DISTINCT parentId
				FROM s_provinces
				where 1=1 
	    		<isNotEmpty property="isUse" prepend="and">
	    			isUse = #isUse#
	    		</isNotEmpty>
	    		<isNotEmpty prepend="and" property="linkCitys"> 
					cityName IN
					<iterate property="linkCitys" open="(" close=")" conjunction="," > 
			        	#linkCitys[]# 
			        </iterate>
		    	</isNotEmpty>
		    	)
    </select>

    <!-- mapped statement for IbatisSProvinceDAO.queryByProvinceName -->
			 <select id="MS-S-PROVINCE-QUERY-BY-PROVINCE-NAME" resultMap="RM-S-PROVINCE">
	        SELECT * FROM s_provinces
				where 1=1 
				<isNotEmpty property="provinceName" prepend="and">
	    			cityName like '%$provinceName$%'
	    		</isNotEmpty>
	    		<isNotEmpty property="isUse" prepend="and">
	    			isUse = #isUse#
	    		</isNotEmpty>
	    		<isNotEmpty property="depth" prepend="and">
	    			depth = #depth#
	    		</isNotEmpty>
    </select>

    <!-- mapped statement for IbatisSProvinceDAO.queryAllCityByParentId -->
			 <select id="MS-S-PROVINCE-QUERY-ALL-CITY-BY-PARENT-ID" resultMap="RM-S-PROVINCE">
	        SELECT * FROM s_provinces
				where 1=1 
				<isNotEmpty property="parentId" prepend="and">
	    			parentId = #parentId#
	    		</isNotEmpty>
	    		<isNotEmpty property="isUse" prepend="and">
	    			isUse = #isUse#
	    		</isNotEmpty>
	    		ORDER BY pinyin
	    		<isNotEmpty property="offset">
	    			LIMIT $offset$, $limit$
	    		</isNotEmpty>
    </select>

    <!-- mapped statement for IbatisSProvinceDAO.queryCityById -->
			 <select id="MS-S-PROVINCE-QUERY-CITY-BY-ID" resultMap="RM-S-PROVINCE">
	        SELECT * FROM s_provinces
				where 1=1 
				<isNotEmpty property="id" prepend="and">
	    			id = #id#
	    		</isNotEmpty>
    </select>

    <!-- mapped statement for IbatisSProvinceDAO.queryAllCityNameByParentId -->
			 <select id="MS-S-PROVINCE-QUERY-ALL-CITY-NAME-BY-PARENT-ID" resultClass="java.lang.String">
	        SELECT 
					cityName
				FROM s_provinces
				where 1=1 
				<isNotEmpty property="parentId" prepend="and">
	    			parentId = #parentId#
	    		</isNotEmpty>
	    		<isNotEmpty property="isUse" prepend="and">
	    			isUse = #isUse#
	    		</isNotEmpty>
	    		ORDER BY pinyin
	    		<isNotEmpty property="offset">
	    			LIMIT $offset$, $limit$
	    		</isNotEmpty>
    </select>

    <!-- mapped statement for IbatisSProvinceDAO.queryAllCityByParentIdS -->
			 <select id="MS-S-PROVINCE-QUERY-ALL-CITY-BY-PARENT-ID-S" resultMap="RM-S-PROVINCE">
	        SELECT * FROM s_provinces
				where 1=1 
	    		<isNotEmpty prepend="and" property="parentIds"> 
				 	parentId IN
					<iterate property="parentIds" open="(" close=")" conjunction="," > 
		        		#parentIds[]# 
		        	</iterate>
		    	</isNotEmpty>
	    		<isNotEmpty property="isUse" prepend="and">
	    			isUse = #isUse#
	    		</isNotEmpty>
	    		<isNotEmpty property="depth" prepend="and">
	    			depth = #depth#
	    		</isNotEmpty>
	    		ORDER BY parentId, pinyin
	    		<isNotEmpty property="offset">
	    			LIMIT $offset$, $limit$
	    		</isNotEmpty>
    </select>

    <!-- mapped statement for IbatisSProvinceDAO.queryCityByIdS -->
			 <select id="MS-S-PROVINCE-QUERY-CITY-BY-ID-S" resultClass="java.lang.String">
	        SELECT shortName FROM s_provinces
				where 1=1 
	    		<isNotEmpty prepend="and" property="ids"> 
				 	id IN
					<iterate property="ids" open="(" close=")" conjunction="," > 
		        		#ids[]# 
		        	</iterate>
		    	</isNotEmpty>
    </select>

</sqlMap>